require=function s(a,r,l){function c(e,t){if(!r[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=r[e]={exports:{}};a[e][0].call(o.exports,function(t){return c(a[e][1][t]||t)},o,o.exports,s,a,r,l)}return r[e].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)c(l[t]);return c}({ATile:[function(t,e,i){"use strict";cc._RF.push(e,"6f90b/HapFGeJ/T4ChN38us","ATile"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=(n.property,function(){function t(t){this.g=0,this.h=0,this.f=0,this.position=null,this.last=null,t&&(this.position=t)}return t.prototype.getF=function(){this.f=this.g+this.h},t=__decorate([o],t)}());i.default=s,cc._RF.pop()},{}],BulletPosion:[function(t,e,i){"use strict";cc._RF.push(e,"316693cPIpBZpKwqRiNpaX0","BulletPosion"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Enemy"),o=t("./Bullet"),s=cc._decorator,a=s.ccclass,r=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.update=function(t){this.target.name||this.node.destroy(),this.target&&this.bulletTarget()},e.prototype.onCollisionEnter=function(t,e){"1"==t.tag&&t.node.getComponent(n.default).index==this.indexTarget&&(t.node.getComponent(n.default).isDie||(t.node.getComponent(n.default).activePosion(this.damagePosion,this.timeActive),t.node.getComponent(n.default).slow(this.slow,this.timeActive),t.node.getComponent(n.default).takeDame(this.damage)),this.node.destroy())},e=__decorate([a],e)}(o.default));i.default=r,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy"}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"d3b5a2FkzFOV5DDyYRClDO8","Bullet"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Enemy"),o=cc._decorator,s=o.ccclass,a=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t.indexTarget=0,t.damage=1,t.crit=1,t.slow=1,t.timeActive=1,t.nameExplosion="",t.damagePosion=1,t.stun=0,t.direction=null,t.chanceCrit=0,t.chanceStun=0,t}return __extends(t,e),t.prototype.update=function(t){this.target.name||this.node.destroy(),this.target&&this.bulletTarget()},t.prototype.bulletTarget=function(){if(this.target){var t=this.node.getPosition(),e=this.target.getPosition(),i=cc.pNormalize(cc.pSub(e,t)),n=cc.pAdd(t,cc.pMult(i,5));this.node.setPosition(n)}},t.prototype.bulletTargetStay=function(){var t=this.node.getPosition(),e=cc.pAdd(t,cc.pMult(this.direction,3.5));this.node.setPosition(e)},t.prototype.chance=function(t){var e=1/(t/100);return 1==Math.floor(Math.random()*(e-1+1))+1},t.prototype.checkColli=function(t,e){"1"==t.tag&&t.node.getComponent(n.default).index==this.indexTarget&&(t.node.getComponent(n.default).isDie||(this.chance(this.chanceCrit)&&(this.damage*=this.crit),this.chance(this.chanceStun)&&t.node.getComponent(n.default).stun(this.stun),1<this.slow&&t.node.getComponent(n.default).slow(this.slow,this.timeActive),1<this.damagePosion&&t.node.getComponent(n.default).activePosion(this.damagePosion,this.timeActive),t.node.getComponent(n.default).takeDame(this.damage)),""==this.nameExplosion?this.node.destroy():this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.node.destroy()},this))))},t.prototype.onCollisionEnter=function(t,e){this.checkColli(t,e)},t=__decorate([s],t)}(cc.Component));i.default=a,cc._RF.pop()},{"./Enemy":"Enemy"}],CameraControl:[function(t,e,i){"use strict";cc._RF.push(e,"672e5gYuOtAUITz5qwTk3An","CameraControl"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.target=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(t){var e;e=this.target.parent.convertToWorldSpaceAR(this.target.position),this.node.position=this.node.parent.convertToNodeSpaceAR(e)},__decorate([s(cc.Camera)],t.prototype,"camera",void 0),__decorate([s(cc.Node)],t.prototype,"target",void 0),t=__decorate([o],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"8f27aTiXWpHM4uTwJPYAxR2","Enemy"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./HitDamage"),o=cc._decorator,s=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startHealth=350,t.startSpeed=.85,t.index=0,t.speed=0,t.pathMove=[],t.delayTime=0,t.currentHealth=0,t.damePosion=0,t.slowPer=0,t.dirScale=1,t.ani=null,t.animState=null,t.isDie=!1,t.isSlow=!1,t.isPosion=!1,t.gameController=null,t.endPos=null,t.hitPrefab=null,t.progressBar=null,t.HpUi=null,t}return __extends(t,e),t.prototype.damageToEndPos=function(){return 1},t.prototype.update=function(t){this.isDie||(this.checkEndPos(),this.move(),this.updateHpUI(),this.animState.speed=this.speed/4)},t.prototype.onLoad=function(){this.speed=this.startSpeed,this.ani=this.getComponent(cc.Animation),this.animState=this.ani.getAnimationState("Walk"),this.currentHealth=this.startHealth=this.gameController.dataWaveEnemy[this.gameController.countWay].details.HP,this.dirScale=this.node.scaleX},t.prototype.updateHpUI=function(){this.progressBar.progress=this.currentHealth/this.startHealth},t.prototype.move=function(){if(0<this.pathMove.length){var t=Math.round(this.node.x),e=Math.round(this.pathMove[0].x);if(t!=e){if(this.ani.getAnimationState("Walk").isPlaying||(this.animState=this.ani.play("Walk")),t<e){if(this.progressBar.reverse=!1,this.node.scaleX=this.dirScale,this.node.x+=this.speed,this.node.x>e)return this.node.setPosition(this.pathMove[0]),void this.pathMove.shift()}else if(this.progressBar.reverse=!0,this.node.scaleX=-1*this.dirScale,this.node.x-=this.speed,this.node.x<e)return this.node.setPosition(this.pathMove[0]),void this.pathMove.shift()}else if(this.node.y<this.pathMove[0].y){if(this.ani.getAnimationState("WalkTop").isPlaying||(this.animState=this.ani.play("WalkTop")),this.progressBar.reverse=!1,this.node.scaleX=this.dirScale,this.node.y+=this.speed,this.node.y>this.pathMove[0].y)return this.node.setPosition(this.pathMove[0]),void this.pathMove.shift()}else if(this.ani.getAnimationState("WalkDown").isPlaying||(this.animState=this.ani.play("WalkDown")),this.progressBar.reverse=!1,this.node.scaleX=this.dirScale,this.node.y-=this.speed,this.node.y<this.pathMove[0].y)return this.node.setPosition(this.pathMove[0]),void this.pathMove.shift();cc.pointEqualToPoint(this.node.getPosition(),this.pathMove[0])&&this.pathMove.shift()}},t.prototype.checkEndPos=function(){var t=this.gameController.mapController.tilePosistion(this.node.getPosition()),e=this.gameController.mapController.tilePosistion(this.endPos);cc.pointEqualToPoint(t,e)&&(this.gameController.takeDamage(this.damageToEndPos()),this.node.destroy())},t.prototype.takeDame=function(t){this.currentHealth-=t,this.currentHealth<=0&&this.dieEffect();var e=cc.instantiate(this.hitPrefab);e.setPosition(this.node.getPosition()),e.setPositionY(this.node.getPositionY()+this.node.height),e.getComponent(n.default).damageDisplay=t,this.gameController.mapController.node.addChild(e)},t.prototype.dieEffect=function(){this.isDie=!0,this.HpUi.active=!1,this.unscheduleAllCallbacks();var t=cc.callFunc(function(){this.animState=this.ani.play("Die")},this),e=cc.callFunc(function(){this.node.destroy()},this);this.node.runAction(cc.sequence(t,cc.delayTime(1.8),e))},t.prototype.activePosion=function(t,e){if(t>this.damePosion||!this.isPosion){this.damePosion=t,this.isPosion=!0,this.unschedule(this.takePosion),this.schedule(this.takePosion,1,e-1,0);var i=cc.callFunc(function(){this.isPosion=!1},this);this.node.runAction(cc.sequence(cc.delayTime(e),i))}},t.prototype.takePosion=function(){this.currentHealth-=this.damePosion,this.currentHealth<=0&&this.dieEffect();var t=cc.instantiate(this.hitPrefab);t.setPosition(this.node.getPosition()),t.setPositionY(this.node.getPositionY()+this.node.height),t.getComponent(n.default).damageDisplay=this.damePosion,this.gameController.mapController.node.addChild(t)},t.prototype.ReleaseSlow=function(){this.damePosion=0,this.slowPer=0,this.speed=this.startSpeed},t.prototype.ReleaseStun=function(){this.speed=this.startSpeed,0<this.slowPer&&(this.speed=this.startSpeed-this.startSpeed*this.slowPer/100)},t.prototype.slow=function(t,e){if(t>this.slowPer||!this.isSlow){this.slowPer=t,this.speed=this.startSpeed-this.startSpeed*t/100,this.isSlow=!0,this.unschedule(this.ReleaseSlow),this.schedule(this.ReleaseSlow,e+1,0,0);var i=cc.callFunc(function(){this.isSlow=!1},this);this.node.runAction(cc.sequence(cc.delayTime(e),i))}},t.prototype.stun=function(t){this.speed=0,this.unschedule(this.ReleaseStun),this.schedule(this.ReleaseStun,t+1,0,0)},__decorate([a(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([a(cc.Node)],t.prototype,"HpUi",void 0),t=__decorate([s],t)}(cc.Component);i.default=r,cc._RF.pop()},{"./HitDamage":"HitDamage"}],GameController:[function(t,e,i){"use strict";cc._RF.push(e,"ff067PVApxGxq/WZzaAv8HO","GameController"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./MapController"),s=t("./Tile"),j=t("./Gem"),_=t("./Stone"),r=t("./Enemy"),d=t("./InitData"),a=t("./GemOpal"),o=t("./ManagerUi"),l=cc._decorator,c=l.ccclass,h=l.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countWay=0,t.countGemCreate=0,t.round=1,t.numOfenemy=3,t.hp=20,t.gold=0,t.mileWays=[],t.tiles=[],t.gems=[],t.gemsCurrentWay=[],t.path=[],t.stones=[],t.row=0,t.col=0,t.indexAround=[],t.tileSize=0,t.enemys=[],t.endPos=null,t.indexKeepGem=0,t.indexEnemy=1,t.indexGem=0,t.gemDisplaying=null,t.levelPlayer=0,t.endMile=null,t.isEndWay=!1,t.isActiveWay=!1,t.isKeepGem=!1,t.isPathCanMove=!0,t.isFlyEnemyNextWay=!1,t.blockInputEvent=!0,t.isCompleteBuild=!0,t.touchStartPos=null,t.touchCurrentPos=null,t.touchStart=!1,t.touchMove=!1,t.touchEnd=!1,t.gemClick=null,t.tempCreateGem=null,t.stonePick=null,t.mileStart=null,t.gemPrefab=[],t.enemyPrefab=[],t.stonePrefab=null,t.milePrefab=null,t.mileStartPrefab=null,t.hitPrefab=null,t.buildCloudPrefab=null,t.combineListPrefab=null,t.gemCombinePrefab=[],t.blockInputUi=null,t.managerUi=null,t.shopUi=null,t.playerUi=null,t.showInput=null,t.displayInfoGem=null,t.btnIsKeepBuild=null,t.btnCreateGem=null,t.btnStartWay=null,t.btnRemoveStone=null,t.btnRemoveGem=null,t.btnCombine=null,t.listHighlight=null,t.displayRangeUi=null,t.notifica=null,t.gra=null,t.infoCombine=null,t.targetCamera=null,t.addInMap=null,t.dataGem=[],t.dataGemCombine=[],t.dataWaveEnemy=[],t.effectSelect=[],t.listGemsRemoveCombine=[],t.gemKeepCombine=null,t.gemCombine=null,t.dataCombine=[],t}return __extends(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0;var t=cc.url.raw("resources/Gem.json"),e=cc.url.raw("resources/enemy_wave.json"),i=cc.url.raw("resources/CombineList.json"),n=cc.url.raw("resources/GemCombine.json"),o=this;cc.loader.load(t,function(t,e){o.dataGem=e}),cc.loader.load(e,function(t,e){o.dataWaveEnemy=e}),cc.loader.load(i,function(t,e){o.dataCombine=e.Combine}),cc.loader.load(n,function(t,e){o.dataGemCombine=e.ListGemCombine}),this.roundUI=this.playerUi.getChildByName("Round").getComponent(cc.Label),this.enemysWayUI=this.playerUi.getChildByName("EnemysWay").getComponent(cc.Label),this.hpUI=this.playerUi.getChildByName("HP").getComponent(cc.Label),this.goldUI=this.playerUi.getChildByName("Gold").getComponent(cc.Label),this.levelUI=this.playerUi.getChildByName("LvPlayer").getComponent(cc.Label),this.tileSize=32,this.mileWays=d.default.mileWays,(this.mapController.gameController=this).isActiveWay=!1,this.gold=2e3,this.row=44,this.col=60,this.indexEnemy=1,this.levelPlayer=1,this.addInMap=this.mapController.node.getChildByName("Add"),this.generaTileAndMiles(),this.addTouchOn(),this.updateUi();var s=this.mapController.pixelPosition(this.mileWays[0]);s.x+=this.tileSize/2,s.y+=this.tileSize/2,this.gra.node.setPosition(s.x,s.y),this.endMile=this.mapController.pixelPosition(this.mileWays[this.mileWays.length-1])},t.prototype.generaTileAndMiles=function(){for(var t=0;t<this.col;t++)for(var e=0;e<this.row;e++){(o=new s.default).hasGem=o.hasStone=o.hasMile=!1,o.pos=cc.v2(e,t),this.tiles.push(o)}for(t=0;t<this.mileWays.length;t++){var i=void 0,n=[this.mileWays[t].y*this.row+this.mileWays[t].x,this.mileWays[t].y*this.row+this.mileWays[t].x+1,(this.mileWays[t].y+1)*this.row+this.mileWays[t].x,(this.mileWays[t].y+1)*this.row+this.mileWays[t].x+1];0==t?(i=cc.instantiate(this.mileStartPrefab),this.mileStart=i):i=cc.instantiate(this.milePrefab),i.setPosition(this.mapController.pixelPosition(this.mileWays[t])),i.getChildByName("index").getComponent(cc.Label).string=(t+1).toString(),this.addInMap.addChild(i);for(var o=0;o<n.length;o++)this.tiles[o].hasMile=!0}},t.prototype.setSizeUI=function(){var t=(cc.director.getWinSize().width-16*this.row)/2,e=this.mapController.getComponent(cc.Widget);e.left=e.right=t},t.prototype.getPaths=function(t){this.path=[];for(var e=0;e<this.mileWays.length-1;e++){var i=this.mapController.moveToward(this.mileWays[e],this.mileWays[e+1],t);if(i.length<1){this.isPathCanMove=!1,console.log("Can't Move");break}this.isPathCanMove=!0,this.path.push(i)}},t.prototype.addTouchOn=function(){var v,E,b,l,P=this,t=function(t){var e=t.getTouches()[0].getLocation(),i=P.mapController.node.convertToNodeSpaceAR(e);if(i=cc.pAdd(i,P.targetCamera.getPosition()),P.blockInputEvent)"touchstart"==t.type&&(P.touchStart=!0,P.touchEnd=!1,P.touchMove=!1,P.touchStartPos=i),"touchmove"==t.type&&(P.touchMove=!0,P.touchCurrentPos=i),"touchend"==t.type&&(P.touchStart=!1,P.touchEnd=!0,P.touchMove=!1),"touchcancel"==t.type&&console.log("touchcancel");else{if(P.btnIsKeepBuild.active)return;if(P.countGemCreate<5&&(i.y+=4*P.tileSize),P.endPos=i,v=P.mapController.tilePosistion(i),E=P.mapController.pixelPosition(v),b=v.y*P.row+v.x,P.indexAround=[v.y*P.row+v.x,v.y*P.row+v.x+1,(v.y+1)*P.row+v.x,(v.y+1)*P.row+v.x+1],!P.tiles[b])return;if("touchmove"==t.type&&l==b)return;if(P.countGemCreate<5&&!P.tiles[b].hasGem&&P.isCompleteBuild){if(P.gemDisplaying||P.stonePick)return;if(P.showInput.active=!0,P.showInput.setPosition(cc.v2(E.x+P.tileSize/2,E.y-P.tileSize/2)),P.showInput.getChildByName("GemCount").getComponent(cc.Label).string="("+(5-P.countGemCreate).toString()+")",P.isCanCreateGem(P.indexAround)){if(!P.isCompleteBuild)return;if(l!=b){l=b;for(var n=0,o=P.indexAround;n<o.length;n++){var s=o[n];P.tiles[s].hasGem=!0}P.getPaths(!1),P.showPathsMove();for(var a=0,r=P.indexAround;a<r.length;a++){s=r[a];P.tiles[s].hasGem=!1}}P.isPathCanMove?"touchend"!=t.type&&"touchcancel"!=t.type||!P.isCompleteBuild||(P.btnIsKeepBuild.setPosition(E.x+P.tileSize/2,E.y-P.tileSize/2),P.btnIsKeepBuild.active=!0):(P.showInput.active=!1,P.gra.clear())}else P.showInput.active=!1,P.gra.clear()}}};P.mapController.node.on(cc.Node.EventType.TOUCH_START,function(t){if(!P.btnIsKeepBuild.active&&!P.showInput.active){var e=t.getTouches()[0].getLocation(),i=P.mapController.node.convertToNodeSpaceAR(e);if(i=cc.pAdd(i,P.targetCamera.getPosition()),P.endPos=i,v=P.mapController.tilePosistion(i),E=P.mapController.pixelPosition(v),b=v.y*P.row+v.x,P.gemClick=null,P.stonePick=null,P.updateListGems(),P.updateListStone(),P.listGemsRemoveCombine=[],P.tiles[b].hasStone)for(var n=0,o=P.stones;n<o.length;n++)for(var s=(y=o[n]).getComponent(_.default).pos,a=0,r=[cc.v2(s.x,s.y),cc.v2(s.x+1,s.y),cc.v2(s.x,s.y+1),cc.v2(s.x+1,s.y+1)];a<r.length;a++){var l=r[a];if(cc.pointEqualToPoint(l,v)){P.stonePick=y;var c=P.mapController.pixelPosition(y.getComponent(_.default).pos);P.btnRemoveStone.setPosition(c.x+P.tileSize/2,c.y+2*P.tileSize),P.btnRemoveStone.active=!0;break}}else P.btnRemoveStone.active=!1;if(P.tiles[b].hasGem){for(var h=0,m=P.gems;h<m.length;h++){s=(y=m[h]).getComponent(j.default).pos;for(var d=0,u=[cc.v2(s.x,s.y),cc.v2(s.x+1,s.y),cc.v2(s.x,s.y+1),cc.v2(s.x+1,s.y+1)];d<u.length;d++)if(l=u[d],cc.pointEqualToPoint(l,v)){P.gemClick=y;break}}if(!P.isKeepGem)for(var p=0,g=P.gemsCurrentWay;p<g.length;p++){var y;if(""!=(y=g[p]).name&&(s=y.getComponent(j.default).pos,l=P.gemClick.getComponent(j.default).pos,cc.pointEqualToPoint(s,l))){P.indexKeepGem=b;break}}if(P.gemClick){var f=P.gemClick.getComponent(j.default),C=[f.minDamage(),f.maxDamage()];P.showDisplayGem(f.pos,f.Type(),C,f.range(),P.gemClick,f.icon)}}else P.gemDisplaying=null,P.displayRangeUi.active=P.displayInfoGem.active=!1;P.effectSelectTurnOn(),P.updateUi()}},P.mapController.node),P.mapController.node.on(cc.Node.EventType.TOUCH_END,t,P.mapController.node),P.mapController.node.on(cc.Node.EventType.TOUCH_START,t,P.mapController.node),P.mapController.node.on(cc.Node.EventType.TOUCH_MOVE,t,P.mapController.node),P.mapController.node.on(cc.Node.EventType.TOUCH_CANCEL,t,P.mapController.node)},t.prototype.effectSelectTurnOn=function(){if(0<this.effectSelect.length){for(var t=0,e=this.effectSelect;t<e.length;t++){""!==(a=e[t]).name&&(a.scale=1,a.stopAllActions())}this.effectSelect=[]}if(0<this.listGemsRemoveCombine.length){for(var i=void 0,n=[],o=0,s=this.listGemsRemoveCombine;o<s.length;o++){var a=s[o];n.push(a)}n.push(this.gemDisplaying);for(var r=0,l=n;r<l.length;r++){i=(a=l[r]).scale;var c=cc.repeatForever(cc.sequence(cc.scaleTo(.4,i+.15),cc.scaleTo(.4,i-.15)));a.runAction(c),this.effectSelect.push(a)}}},t.prototype.effectSelectTurnOff=function(){if(0<this.effectSelect.length){for(var t=0,e=this.effectSelect;t<e.length;t++){var i=e[t];""!==i.name&&(i.scale=1,i.stopAllActions())}this.effectSelect=[]}},t.prototype.isNeedBuild=function(){this.blockInputEvent=!this.blockInputEvent;var t=this.btnCreateGem.getChildByName("Label").getComponent(cc.Label);this.blockInputEvent?(t.string="Not Build",this.showInput.active=!1):t.string="Build"},t.prototype.showPathsMove=function(){var t=this.path;if(this.gra.clear(),!(t.length<=0)){this.gra.lineWidth=10,this.gra.strokeColor=cc.Color.RED,this.gra.stroke();var e=t[0][0].x,i=t[0][0].y,n=0,o=0;this.gra.fillRect(n,o,this.tileSize,this.tileSize);for(var s=0;s<t.length;s++)for(var a=0;a<t[s].length;a++){var r=t[s][a].x;if(r==e){var l=t[s][a].y;l==i||(i<l?o-=this.tileSize:o+=this.tileSize,i=l,this.gra.fillRect(n,o,this.tileSize,this.tileSize))}else e<r?n+=this.tileSize:n-=this.tileSize,e=t[s][a].x,this.gra.fillRect(n,o,this.tileSize,this.tileSize)}}},t.prototype.isCanCreateGem=function(t){var e=this.mapController.tilePosistion(this.endPos);if(e.y<0||e.x<0||e.x+1>=this.row||e.y+1>=this.col)return!1;for(var i=0,n=t;i<n.length;i++){var o=n[i];if(this.tiles[o]&&(this.tiles[o].hasGem||this.tiles[o].hasStone||this.tiles[o].hasMile))return!1}return!0},t.prototype.createGem=function(n){if(this.isCompleteBuild){this.showInput.active=!1,this.isCompleteBuild=!1;var o,t,s=this.mapController.tilePosistion(this.endPos),a=this.mapController.pixelPosition(s),e=this.gemPrefab.length-1,r=Math.floor(Math.random()*(e-0+1))+0,i=cc.callFunc(function(){this.indexGem++,(o=cc.instantiate(this.gemPrefab[r])).getComponent(j.default).pos=s,o.getComponent(j.default).gameController=this,o.getComponent(j.default).currentLevel=d.default.ranLevelGem(this.levelPlayer),o.getComponent(j.default).index=this.indexGem,o.getComponent(j.default).posSquare=[s.y*this.row+s.x,s.y*this.row+s.x+1,(s.y+1)*this.row+s.x,(s.y+1)*this.row+s.x+1],o.setPosition(cc.v2(a.x+this.tileSize/2,a.y-this.tileSize/2)),this.addInMap.addChild(o),this.gemsCurrentWay.push(o),this.gems.push(o);for(var t=0,e=n;t<e.length;t++){var i=e[t];this.tiles[i].hasGem=!0,this.tiles[i].hasStone=!1}o.opacity=0,o.runAction(cc.fadeTo(.5,255))},this),l=cc.callFunc(function(){(t=cc.instantiate(this.buildCloudPrefab)).setPosition(cc.v2(a.x+this.tileSize/2,a.y-this.tileSize/2)),this.addInMap.addChild(t)},this),c=cc.callFunc(function(){t.destroy()},this),h=cc.callFunc(function(){for(var t=this.listHighlight.children,e=0;e<this.gemsCurrentWay.length;e++)t[e].active=!0,t[e].position=this.gemsCurrentWay[e].getPosition(),t[e].setPositionY(t[e].getPositionY());this.countGemCreate++,this.isCompleteBuild=!0},this),m=cc.sequence(l,cc.delayTime(1),i,c,cc.delayTime(.5),h);this.node.runAction(m),4<=this.countGemCreate&&(this.isNeedBuild(),this.btnCreateGem.getComponent(cc.Button).interactable=!1)}},t.prototype.updateListGems=function(){var t=this.addInMap.children;this.gems=[];for(var e=t.length,i=0;i<e;i++){if(t[i].getComponent(j.default)){var n=t[i];this.gems.push(n)}}},t.prototype.updateListStone=function(){var t=this.addInMap.children;this.stones=[];for(var e=t.length,i=0;i<e;i++){if(t[i].getComponent(_.default)){var n=t[i];this.stones.push(n)}}},t.prototype.startWay=function(){if(this.isFlyEnemyNextWay=this.dataWaveEnemy[this.countWay].details.moving_fly,this.getPaths(this.isFlyEnemyNextWay),this.isPathCanMove){this.indexEnemy=1,this.gra.clear();var t=cc.callFunc(function(){this.createEnemy()},this),e=cc.callFunc(function(){this.mileStart.getComponent(cc.Animation).play("OpenDoor")},this),i=cc.callFunc(function(){this.mileStart.getComponent(cc.Animation).play("CloseDoor")},this),n=cc.callFunc(function(){this.schedule(this.checkEndWay,0,cc.macro.REPEAT_FOREVER,0)},this),o=cc.sequence(t,cc.delayTime(1.2)),s=cc.repeat(o,this.numOfenemy),a=cc.sequence(e,cc.delayTime(1),s,i,n);this.node.runAction(a),this.isActiveWay=!0,this.schedule(this.updateListEnemy,0,cc.macro.REPEAT_FOREVER,0),this.updateUi()}this.updateListGems();for(var r=0,l=this.gems;r<l.length;r++){l[r].getComponent(j.default).isbuff=!1}},t.prototype.createEnemy=function(){var t=cc.instantiate(this.enemyPrefab[this.countWay]),e=this.mapController.pixelPosition(this.mileWays[0]);t.setPosition(e),t.getComponent(r.default).endPos=this.endMile;for(var i=[],n=t.scale,o=0;o<this.path.length;++o)for(var s=0;s<this.path[o].length;++s){var a=this.mapController.pixelPosition(this.path[o][s]);i.push(a)}t.getComponent(r.default).pathMove=i,t.getComponent(r.default).gameController=this,t.getComponent(r.default).hitPrefab=this.hitPrefab,t.getComponent(r.default).index=this.indexEnemy,this.addInMap.addChild(t),t.scale=.1,t.runAction(cc.scaleTo(2,n)),this.indexEnemy++},t.prototype.KeepGem=function(){this.displayRangeUi.active=this.displayInfoGem.active=!1,this.gemClick=null,this.isKeepGem=!0;for(var t=0,e=this.listHighlight.children;t<e.length;t++){e[t].active=!1}for(var i=0;i<this.gemsCurrentWay.length;i++)for(var n=0,o=this.gemsCurrentWay[i].getComponent(j.default).posSquare;n<o.length;n++){if((s=o[n])==this.indexKeepGem){this.gemsCurrentWay.splice(i,1);break}}for(var s=0;s<this.gemsCurrentWay.length;s++){var a=cc.instantiate(this.stonePrefab),r=this.gemsCurrentWay[s].getComponent(j.default).posSquare;a.setPosition(this.gemsCurrentWay[s].getPosition()),a.getComponent(_.default).posSquare=r,a.getComponent(_.default).gameController=this,a.getComponent(_.default).pos=this.gemsCurrentWay[s].getComponent(j.default).pos,this.addInMap.addChild(a);for(i=0;i<r.length;i++)this.tiles[r[i]].hasGem=!1,this.tiles[r[i]].hasStone=!0;this.gemsCurrentWay[s].destroy()}this.gemsCurrentWay=[],this.effectSelectTurnOff(),this.startWay()},t.prototype.updateUi=function(){this.isActiveWay||this.countGemCreate,this.roundUI.string="Round : "+this.round.toString(),this.enemysWayUI.string="Enemy : "+this.numOfenemy.toString(),this.hpUI.string="Hp : "+this.hp.toString(),this.goldUI.string="Gold : "+this.gold.toString(),this.levelUI.string="Level : "+this.levelPlayer.toString(),this.displayRangeUi.setSiblingIndex(this.mapController.node.childrenCount-1)},t.prototype.resetWay=function(){this.unscheduleAllCallbacks(),this.countWay++,this.countGemCreate=0,this.btnCreateGem.getComponent(cc.Button).interactable=!0,this.isEndWay=!1,this.isActiveWay=!1,this.countGemCreate=0,this.isKeepGem=!1,this.isPathCanMove=!1,this.updateUi()},t.prototype.updateListEnemy=function(){this.enemys=[];for(var t=this.addInMap.children,e=t.length,i=0;i<e;i++){var n=t[i].getComponent(r.default);n&&!n.isDie&&this.enemys.push(t[i])}},t.prototype.checkEndWay=function(){this.isActiveWay&&0==this.enemys.length&&(this.isEndWay=!0,this.round++,this.numOfenemy++,this.resetWay())},t.prototype.showDisplayGem=function(t,e,i,n,o,s){this.gemDisplaying=o,this.displayRangeUi.active=this.displayInfoGem.active=!0;var a=this.mapController.pixelPosition(t),r=this.displayInfoGem.getChildByName("icon").getComponent(cc.Sprite);this.displayRangeUi.setPosition(cc.v2(a.x+this.tileSize/2,a.y-this.tileSize/2));var l=this.displayInfoGem.getChildByName("stats").getChildByName("Name").getComponent(cc.Label),c=this.displayInfoGem.getChildByName("stats").getChildByName("Damage").getComponent(cc.Label);r.spriteFrame=s,this.gemDisplaying.getComponent(j.default).isCombined?l.string=e:l.string=o.name+" - "+e,i[0]!=i[1]?c.string="Damage : "+i[0]+" - "+i[1]:c.string="Damage : "+i[0];var h=this.displayRangeUi.getChildByName("Combine");h.active=!1;var m=this.displayRangeUi.getChildByName("Downgrade");m.active=!1;var d=this.displayRangeUi.getChildByName("Keep");d.active=!1;var u=this.displayRangeUi.getChildByName("Upgrade");u.active=!1,this.displayRangeUi.setContentSize(2*n-o.height/2,2*n-o.height/2);var p=this.gemDisplaying.getComponent(j.default).listLevelObj.length,g=this.gemDisplaying.getComponent(j.default).currentLevel;this.gemDisplaying.getComponent(j.default).isCombined&&(this.isKeepGem&&(1<=g||g<p-1)&&(u.active=!0),g==p&&(u.active=!0,u.getComponent(cc.Button).interactable=!1,u.getChildByName("label").getComponent(cc.Label).string="Max Level"));if(5==this.countGemCreate||0==this.countGemCreate)if(5==this.countGemCreate&&!this.isKeepGem&&this.checkGemInGemsCurrentWay(this.gemDisplaying)&&(d.active=!0),!this.isKeepGem&&1<this.gemDisplaying.getComponent(j.default).currentLevel&&this.checkGemInGemsCurrentWay(this.gemDisplaying)&&!this.gemDisplaying.getComponent(j.default).isCombined&&(m.active=!0),this.gemDisplaying.getComponent(j.default).isCombined)h.active=!1;else{var y=!0;if(5!=this.countGemCreate||this.checkGemInGemsCurrentWay(this.gemDisplaying)||(y=!1),y)if(this.checkCombineGem())h.active=!0,h.getChildByName("label").getComponent(cc.Label).string=this.gemCombine.Name.toString()}},t.prototype.checkGemInGemsCurrentWay=function(t){for(var e=0,i=this.gemsCurrentWay;e<i.length;e++){var n=i[e];if(""!=n.name)for(var o=n.getComponent(j.default).pos,s=0,a=[cc.v2(o.x,o.y),cc.v2(o.x+1,o.y),cc.v2(o.x,o.y+1),cc.v2(o.x+1,o.y+1)];s<a.length;s++){var r=a[s],l=t.getComponent(j.default).pos;if(cc.pointEqualToPoint(r,l))return!0}}return!1},t.prototype.takeDamage=function(t){this.hp-=t,this.hp<=0&&(this.hp=0,this.updateUi(),console.log("End Game")),this.updateUi()},t.prototype.downgradeGem=function(){var t=this.gemDisplaying.getComponent(j.default);t.currentLevel--;var e=t.pos;this.indexKeepGem=e.y*this.row+e.x,this.KeepGem()},t.prototype.removeGem=function(t){var e;if(e=t.name?t:this.gemDisplaying,this.checkGemInGemsCurrentWay(e))for(var i=0;i<this.gemsCurrentWay.length;i++)this.gemsCurrentWay[i].getComponent(j.default).index==t.getComponent(j.default).index&&this.gemsCurrentWay.splice(i,1);var n=e.getComponent(j.default).posSquare,o=cc.instantiate(this.stonePrefab);o.setPosition(e.getPosition()),o.getComponent(_.default).posSquare=n,o.getComponent(_.default).gameController=this,o.getComponent(_.default).pos=e.getComponent(j.default).pos,this.addInMap.addChild(o);for(i=0;i<n.length;i++)this.tiles[n[i]].hasGem=!1,this.tiles[n[i]].hasStone=!0;e.getComponent(a.default)&&e.getComponent(a.default).removedBuffGemsAround(),e.destroy(),this.displayRangeUi.active=this.displayInfoGem.active=!1},t.prototype.removeStone=function(t){for(var e,i=(e=t.name?t:this.stonePick).getComponent(_.default).posSquare,n=0;n<i.length;n++)this.tiles[i[n]].hasGem=!1,this.tiles[i[n]].hasStone=!1;e.destroy(),this.btnRemoveStone.active=!1,this.getPaths(!1),this.showPathsMove()},t.prototype.checkCombineGem=function(){var t=this.gemDisplaying;if(this.listGemsRemoveCombine=[],this.gemKeepCombine=null,this.gemCombine=null,!t)return!1;for(var e=[],i=t.getComponent(j.default).Type(),n=0,o=this.dataCombine;n<o.length;n++)for(var s=0,a=(h=o[n]).List;s<a.length;s++){(b=a[s])[0].toString().toLocaleLowerCase()!==t.name.toString().toLocaleLowerCase()||b[1].toString().toLocaleLowerCase()!==i.toString().toLocaleLowerCase()&&""!==b[1].toString().toLocaleLowerCase()||e.push(h.Name)}if(e.length<=0)return!1;var r=[];if(this.isKeepGem||!this.isKeepGem&&0==this.countGemCreate){this.updateListGems();for(var l=0,c=this.gems;l<c.length;l++){var h=c[l];r.push(h)}}else for(var m=0,d=this.gemsCurrentWay;m<d.length;m++){h=d[m];r.push(h)}for(var u=[],p=0;p<this.dataCombine.length;p++)u.push(this.dataCombine[p]);for(var g=[],y=0,f=u;y<f.length;y++)for(var C=(h=f[y]).Name.toString().toLocaleLowerCase(),v=0,E=e;v<E.length;v++){var b;if(C===(b=E[v]).toLocaleLowerCase()){var P=h.Name,_=void 0;3==h.List.length?_=[h.List[0],h.List[1],h.List[2]]:4==h.List.length&&(_=[h.List[0],h.List[1],h.List[2],h.List[3]]);var S={Name:P,List:_};g.push(S);break}}for(var G=0,x=0;x<g.length;x++){var L=g[x].List.length;if(r.length<L)break;for(var A=0,D=g[x].List;A<D.length;A++)for(h=D[A],p=0;p<r.length;p++){var F=r[p].getComponent(j.default).Type();if(r[p].name.toString().toLocaleLowerCase()==h[0].toString().toLocaleLowerCase()&&(F.toLocaleLowerCase()==h[1].toString().toLocaleLowerCase()||""==h[1].toLocaleLowerCase())){L--,G=x;break}}if(0==L){this.gemCombine=g[G],this.gemKeepCombine=t;for(var k=this.gemKeepCombine.name.toLocaleLowerCase(),T=this.gemKeepCombine.getComponent(j.default).Type().toLocaleLowerCase(),w=0;w<r.length;w++){var M=this.gemKeepCombine.getComponent(j.default).index;if(r[w].getComponent(j.default).index==M){r.splice(w,1);for(var R=!0,N=0;N<g[G].List.length;N++){var B=g[G].List[N][0].toLocaleLowerCase(),O=g[G].List[N][1].toLocaleLowerCase();if(B===k&&O===T){g[G].List.splice(N,1),R=!1;break}}if(R)for(N=0;N<g[G].List.length;N++){B=g[G].List[N][0].toLocaleLowerCase(),O=g[G].List[N][1].toLocaleLowerCase();if(B===k&&""===O){g[G].List.splice(N,1),R=!1;break}}break}}for(N=0;N<g[G].List.length;N++)for(B=g[G].List[N][0].toLocaleLowerCase(),O=g[G].List[N][1].toLocaleLowerCase(),p=r.length-1;-1<p;p--){var W=r[p].name.toLocaleLowerCase(),I=r[p].getComponent(j.default).Type().toLocaleLowerCase();if(B===W&&(O===I||""===O)){this.listGemsRemoveCombine.push(r[p]),r.splice(p,1);break}}return!0}}return!1},t.prototype.CombineGem=function(){this.displayRangeUi.active=this.displayInfoGem.active=!1,this.createGemCombine(this.gemKeepCombine,this.gemCombine.Name);for(var t=0,e=this.listGemsRemoveCombine;t<e.length;t++){var i=e[t];i.getComponent(j.default).index!=this.gemKeepCombine.getComponent(j.default).index&&this.removeGem(i)}},t.prototype.createGemCombine=function(t,e){var i;this.indexGem++;for(var n=0,o=this.gemCombinePrefab;n<o.length;n++){var s=o[n];if((i=cc.instantiate(s)).name.toLocaleLowerCase()===e.toLocaleLowerCase())break}i.name=e,i.getComponent(j.default).pos=t.getComponent(j.default).pos,i.getComponent(j.default).gameController=this,i.getComponent(j.default).currentLevel=1,i.getComponent(j.default).index=this.indexGem,i.getComponent(j.default).isCombined=!0,i.getComponent(j.default).posSquare=t.getComponent(j.default).posSquare,i.getComponent(j.default).posSquare=t.getComponent(j.default).posSquare,i.setPosition(t.getPosition()),this.addInMap.addChild(i),i.getChildByName("Label").getComponent(cc.Label).string=e.toString(),this.gems.push(i);var a=i.getComponent(j.default).pos;if(this.indexKeepGem=a.y*this.row+a.x,!this.isKeepGem&&5==this.countGemCreate){this.gemsCurrentWay.push(i);for(var r=0;r<this.gemsCurrentWay.length;r++)if(t.getComponent(j.default).index==this.gemsCurrentWay[r].getComponent(j.default).index){this.gemsCurrentWay.splice(r,1);break}}t.destroy(),this.effectSelect=[]},t.prototype.checkTouchMap=function(){if(this.touchStart&&this.touchMove){var t=cc.pSub(this.touchCurrentPos,this.touchStartPos);t.x/=3,t.y/=3;var e=500,i=this.mapController.node.width-this.targetCamera.width;this.targetCamera.x>=-e&&this.targetCamera.x<=i+e&&(this.targetCamera.x-=t.x,this.targetCamera.x<-e&&(this.targetCamera.x=-e),this.targetCamera.x>i+e&&(this.targetCamera.x=i+e));var n=this.targetCamera.height-this.mapController.node.height;this.targetCamera.y<=500&&this.targetCamera.y>=n-e&&(this.targetCamera.y-=t.y,500<this.targetCamera.y&&(this.targetCamera.y=e),this.targetCamera.y<n-e&&(this.targetCamera.y=n-e))}},t.prototype.UpgradeLevel=function(){20<this.gold&&this.levelPlayer<8&&(this.levelPlayer++,this.gold-=20,this.updateUi())},t.prototype.isKeepBuild=function(t,e){"ok"===e.toString()&&this.createGem(this.indexAround),"cancel"===e.toString()&&(this.showInput.active=!1,this.getPaths(!1),this.showPathsMove()),this.btnIsKeepBuild.active=!1},t.prototype.upgradeLevelGem=function(){this.displayRangeUi.active=this.displayInfoGem.active=!1;var t=this.gemDisplaying.getComponent(j.default);t.currentLevel++;var e=t.pos;this.indexKeepGem=e.y*this.row+e.x},t.prototype.update=function(t){this.checkTouchMap()},__decorate([h(n.default)],t.prototype,"mapController",void 0),__decorate([h(cc.Prefab)],t.prototype,"gemPrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"enemyPrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"stonePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"milePrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"mileStartPrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"hitPrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"buildCloudPrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"combineListPrefab",void 0),__decorate([h(cc.Prefab)],t.prototype,"gemCombinePrefab",void 0),__decorate([h(cc.Node)],t.prototype,"blockInputUi",void 0),__decorate([h(o.default)],t.prototype,"managerUi",void 0),__decorate([h(cc.Node)],t.prototype,"shopUi",void 0),__decorate([h(cc.Node)],t.prototype,"playerUi",void 0),__decorate([h(cc.Node)],t.prototype,"showInput",void 0),__decorate([h(cc.Node)],t.prototype,"displayInfoGem",void 0),__decorate([h(cc.Node)],t.prototype,"btnIsKeepBuild",void 0),__decorate([h(cc.Node)],t.prototype,"btnCreateGem",void 0),__decorate([h(cc.Node)],t.prototype,"btnStartWay",void 0),__decorate([h(cc.Node)],t.prototype,"btnRemoveStone",void 0),__decorate([h(cc.Node)],t.prototype,"btnRemoveGem",void 0),__decorate([h(cc.Node)],t.prototype,"btnCombine",void 0),__decorate([h(cc.Node)],t.prototype,"listHighlight",void 0),__decorate([h(cc.Node)],t.prototype,"displayRangeUi",void 0),__decorate([h(cc.Label)],t.prototype,"notifica",void 0),__decorate([h(cc.Graphics)],t.prototype,"gra",void 0),__decorate([h(cc.Node)],t.prototype,"infoCombine",void 0),__decorate([h(cc.Node)],t.prototype,"targetCamera",void 0),t=__decorate([c],t)}(cc.Component);i.default=m,cc._RF.pop()},{"./Enemy":"Enemy","./Gem":"Gem","./GemOpal":"GemOpal","./InitData":"InitData","./ManagerUi":"ManagerUi","./MapController":"MapController","./Stone":"Stone","./Tile":"Tile"}],GemAmethyst:[function(t,e,i){"use strict";cc._RF.push(e,"2085fPPpbhAMb3lxsnSblLH","GemAmethyst"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Amethyst.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("AmethystShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemAquamarine:[function(t,e,i){"use strict";cc._RF.push(e,"04995Dd/VZOmZ9CV9EonRpc","GemAquamarine"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Aquamarine.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("AquamarineShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemBlackOpal:[function(t,e,i){"use strict";cc._RF.push(e,"31d90h9Q1BOe5S5rDv/uR/2","GemBlackOpal"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Gem"),n=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(!this.isbuff&&0<this.buffDMG()&&(this.checkGemAround(this.rangeBuff()),0<this.listGemAround.length&&this.buffGemsAround(),this.isbuff=!0),this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.buffGemsAround=function(){for(var t=0,e=this.listGemAround;t<e.length;t++){var i=e[t],n=this.buffDMG();i.getComponent(o.default).incrDMG<n&&(i.getComponent(o.default).incrDMG=n)}},t.prototype.removedBuffGemsAround=function(){for(var t=0,e=this.listGemAround;t<e.length;t++){var i=e[t],n=this.buffSDP();(i.getComponent(o.default).incrDMG=n)&&(i.getComponent(o.default).incrDMG=0)}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(n.default).target=this.targetEnemy,t.getComponent(n.default).damage=this.damage(),t.getComponent(n.default).indexTarget=this.targetEnemy.getComponent(s.default).index,this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(o.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemDarkEmerald:[function(t,e,i){"use strict";cc._RF.push(e,"409a1ns77RDJ68IiZg8y2ZN","GemDarkEmerald"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).stun=1.5,t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(o.default).crit=this.critDamage(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemDiamon:[function(t,e,i){"use strict";cc._RF.push(e,"e2d53Ki/zBPg4vRnAyRBvZX","GemDiamon"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Diamon.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("DiamonShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(o.default).crit=this.critDamage(),t.getComponent(o.default).chanceCrit=this.chanceCrit(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemEmerald:[function(t,e,i){"use strict";cc._RF.push(e,"f2461eiHglPKYPvWsDIwkpV","GemEmerald"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Bullet"),o=t("./Gem"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Emerald.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("EmeraldShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0,cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null))},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.detectNearestEnemy=function(){if(!(this.listEnemey.length<=0)){this.nearestEnemy=this.listEnemey[0];for(var t=cc.pDistance(this.nearestEnemy.getPosition(),this.node.getPosition()),e=0,i=this.listEnemey;e<i.length;e++){var n=i[e],o=cc.pDistance(n.getPosition(),this.node.getPosition());o<t&&(t=o,this.nearestEnemy=n)}t<this.range()?this.targetEnemy=this.nearestEnemy:this.targetEnemy=null}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(n.default).target=this.targetEnemy,t.getComponent(n.default).damagePosion=this.damagePosion(),t.getComponent(n.default).damage=this.damage(),t.getComponent(n.default).slow=this.slow(),t.getComponent(n.default).timeActive=this.timeActive(),t.getComponent(n.default).indexTarget=this.targetEnemy.getComponent(s.default).index,this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(o.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemGold:[function(t,e,i){"use strict";cc._RF.push(e,"0eee9GOKWRCiawTJMkf51K9","GemGold"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(o.default).crit=this.critDamage(),t.getComponent(o.default).chanceCrit=this.chanceCrit(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemJade:[function(t,e,i){"use strict";cc._RF.push(e,"70a6cfjlQlGgYHidogzCsjZ","GemJade"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).slow=this.slow(),t.getComponent(o.default).damagePosion=this.damagePosion(),t.getComponent(o.default).timeActive=this.timeActive(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(o.default).crit=this.critDamage(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemMalachite:[function(t,e,i){"use strict";cc._RF.push(e,"4ec0ahoViNBs7Pg0PIrjIoO","GemMalachite"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),r=t("./Bullet"),l=t("./Enemy"),o=cc._decorator,s=o.ccclass,a=o.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),0<this.listEnemey.length&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){0<this.listEnemey.length&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.01)},this),i=cc.callFunc(function(){0<this.listEnemey.length&&this.shoot()},this),n=cc.callFunc(function(){this.isCdShoot=!0},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.listEnemey){if(this.currentLevel!=this.listLevelObj.length){var t=void 0;1==this.currentLevel&&3<this.listEnemey.length&&(t=this.listEnemey.length-3),2==this.currentLevel&&4<this.listEnemey.length&&(t=this.listEnemey.length-4);for(var e=0;e<t;e++)for(var i=0;i<this.listEnemey.length;i++)if(this.listEnemey[i].getComponent(l.default).index==this.listEnemey.length){this.listEnemey.splice(i,1);break}}for(var n=0,o=this.listEnemey;n<o.length;n++){var s=o[n],a=cc.instantiate(this.bulletPrefab);a.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),a.getComponent(r.default).target=s,a.getComponent(r.default).damage=this.damage(),a.getComponent(r.default).indexTarget=s.getComponent(l.default).index,this.gameController.mapController.node.addChild(a)}}},__decorate([a(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([a(cc.Node)],t.prototype,"turret",void 0),__decorate([a(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([s],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemOpal:[function(t,e,i){"use strict";cc._RF.push(e,"e6e97RQOKFG8oDC6xIMEZvL","GemOpal"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Gem"),n=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.cdTime=0,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Opal.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),!this.isbuff&&0<this.buffSDP()&&(this.checkGemAround(this.rangeBuff()),0<this.listGemAround.length&&this.buffGemsAround(),this.isbuff=!0),this.gameController.isActiveWay&&((!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot))){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("OpalShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0,cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null))},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.buffGemsAround=function(){for(var t=0,e=this.listGemAround;t<e.length;t++){var i=e[t],n=this.buffSDP();i.getComponent(o.default).incrSDP<n&&(i.getComponent(o.default).incrSDP=n)}},t.prototype.removedBuffGemsAround=function(){for(var t=0,e=this.listGemAround;t<e.length;t++){var i=e[t],n=this.buffSDP();(i.getComponent(o.default).incrSDP=n)&&(i.getComponent(o.default).incrSDP=0)}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(n.default).target=this.targetEnemy,t.getComponent(n.default).damage=this.damage(),t.getComponent(n.default).indexTarget=this.targetEnemy.getComponent(s.default).index,this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(o.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemPinkDiamond:[function(t,e,i){"use strict";cc._RF.push(e,"bc4c2vRp8VMm55+mZxDOHDj","GemPinkDiamond"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(o.default).crit=this.critDamage(),t.getComponent(o.default).chanceCrit=this.chanceCrit(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemRedCrysta:[function(t,e,i){"use strict";cc._RF.push(e,"800fbgcSqVOGrO99GHzwZkT","GemRedCrysta"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Enemy"),s=t("./Bullet"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t.listEnemeyDps=[],t.collider=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.collider=this.node.getComponent(cc.CircleCollider),this.collider.enabled=!1},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAroundDPS(),this.dpsSkill(),!(this.minDamage()<=0)&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(o.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot))){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.playAdditive("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(s.default).target=this.targetEnemy,t.getComponent(s.default).damage=this.damage(),t.getComponent(s.default).indexTarget=this.targetEnemy.getComponent(o.default).index,this.gameController.mapController.node.addChild(t)}},t.prototype.dpsSkill=function(){if(0<this.listEnemeyDps.length&&this.isCdDps){var t=this.node.getChildByName("dps");this.isCdDps=!1;3==this.currentLevel&&.5;var e=this.rangeDPS();t.setContentSize(2*e,2*e),this.collider.radius=e;var i=cc.callFunc(function(){this.animState=this.ani.playAdditive("dpsStarRuby")},this),n=cc.callFunc(function(){this.collider.enabled=!0},this),o=cc.callFunc(function(){this.collider.enabled=!1},this),s=cc.callFunc(function(){this.isCdDps=!0},this);this.node.runAction(cc.sequence(i,n,cc.delayTime(1),o,s))}},t.prototype.checkEnemyAroundDPS=function(){if(this.listEnemeyDps=[],!(this.gameController.enemys.length<=0))for(var t=0,e=this.gameController.enemys;t<e.length;t++){var i=e[t];cc.pDistance(i.getPosition(),this.node.getPosition())<=this.rangeDPS()&&!i.getComponent(o.default).isDie&&this.listEnemeyDps.push(i)}},t.prototype.onCollisionEnter=function(t,e){"1"==t.tag&&t.node.getComponent(o.default)&&(t.node.getComponent(o.default).isDie||t.node.getComponent(o.default).takeDame(this.listLevelObj[this.currentLevel-1].damageDps))},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemRuby:[function(t,e,i){"use strict";cc._RF.push(e,"709a05Q6WFISK40efjNkrTv","GemRuby"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Enemy"),s=t("./SplashBullet"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SplashBullet=null,t.img=null,t.turret=null,t.cdTime=0,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Ruby.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),this.gameController.isActiveWay&&((!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(o.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot))){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("RubyShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.detectNearestEnemy=function(){if(!(this.listEnemey.length<=0)){this.nearestEnemy=this.listEnemey[0];for(var t=cc.pDistance(this.nearestEnemy.getPosition(),this.node.getPosition()),e=0,i=this.listEnemey;e<i.length;e++){var n=i[e],o=cc.pDistance(n.getPosition(),this.node.getPosition());o<t&&(t=o,this.nearestEnemy=n)}t<this.range()?this.targetEnemy=this.nearestEnemy:this.targetEnemy=null}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.SplashBullet);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(s.default).target=this.targetEnemy,t.getComponent(s.default).damage=this.damage(),t.getComponent(s.default).nameExplosion="RubyExplosion",t.getComponent(s.default).gameController=this.gameController,t.getComponent(s.default).splashTile=this.splashRange(),t.getComponent(s.default).indexTarget=this.targetEnemy.getComponent(o.default).index,this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"SplashBullet",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Enemy":"Enemy","./Gem":"Gem","./SplashBullet":"SplashBullet"}],GemSapphire:[function(t,e,i){"use strict";cc._RF.push(e,"fdcceOg1NxOooZfU35YKlDS","GemSapphire"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.slow=function(){return this.listLevelObj[this.currentLevel-1].slow},t.prototype.timeActive=function(){return this.listLevelObj[this.currentLevel-1].timeActive},t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Sapphire.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SapphireShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(o.default).target=this.targetEnemy,t.getComponent(o.default).damage=this.damage(),t.getComponent(o.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(o.default).slow=this.slow(),t.getComponent(o.default).timeActive=this.timeActive(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemSilver:[function(t,e,i){"use strict";cc._RF.push(e,"72b2cLyTURBRLpwb7oXM2IK","GemSilver"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Enemy"),s=t("./SplashBullet"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(o.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(s.default).target=this.targetEnemy,t.getComponent(s.default).damage=this.damage(),t.getComponent(s.default).gameController=this.gameController,t.getComponent(s.default).nameExplosion="SilverExplosion",t.getComponent(s.default).indexTarget=this.targetEnemy.getComponent(o.default).index,t.getComponent(s.default).slow=this.slow(),t.getComponent(s.default).splashTile=this.splashRange(),t.getComponent(s.default).timeActive=this.timeActive(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Enemy":"Enemy","./Gem":"Gem","./SplashBullet":"SplashBullet"}],GemStarRuby:[function(t,e,i){"use strict";cc._RF.push(e,"04815/o/dJMqo7qn6MdIc7j","GemStarRuby"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Enemy"),s=t("./Bullet"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t.listEnemeyDps=[],t.collider=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.collider=this.node.getComponent(cc.CircleCollider),this.collider.enabled=!1},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAroundDPS(),this.dpsSkill(),!(this.minDamage()<=0)&&(this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(o.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot))){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.playAdditive("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(s.default).target=this.targetEnemy,t.getComponent(s.default).damage=this.damage(),t.getComponent(s.default).indexTarget=this.targetEnemy.getComponent(o.default).index,t.getComponent(s.default).crit=this.critDamage(),t.getComponent(s.default).chanceCrit=this.chanceCrit(),this.gameController.mapController.node.addChild(t)}},t.prototype.dpsSkill=function(){if(0<this.listEnemeyDps.length&&this.isCdDps){var t=this.node.getChildByName("dps");this.isCdDps=!1;3==this.currentLevel&&.5;var e=this.rangeDPS();t.setContentSize(2*e,2*e),this.collider.radius=e;var i=cc.callFunc(function(){this.animState=this.ani.playAdditive("dpsStarRuby")},this),n=cc.callFunc(function(){this.collider.enabled=!0},this),o=cc.callFunc(function(){this.collider.enabled=!1},this),s=cc.callFunc(function(){this.isCdDps=!0},this);this.node.runAction(cc.sequence(i,n,cc.delayTime(1),o,s))}},t.prototype.checkEnemyAroundDPS=function(){if(this.listEnemeyDps=[],!(this.gameController.enemys.length<=0))for(var t=0,e=this.gameController.enemys;t<e.length;t++){var i=e[t];cc.pDistance(i.getPosition(),this.node.getPosition())<=this.rangeDPS()&&!i.getComponent(o.default).isDie&&this.listEnemeyDps.push(i)}},t.prototype.onCollisionEnter=function(t,e){"1"==t.tag&&t.node.getComponent(o.default)&&(t.node.getComponent(o.default).isDie||t.node.getComponent(o.default).takeDame(this.listLevelObj[this.currentLevel-1].damageDps))},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemTopaz:[function(t,e,i){"use strict";cc._RF.push(e,"1c3f5pZz3pMY7URvY8IGE24","GemTopaz"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Gem"),o=t("./Bullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.cdTime=0,t.nearestEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img,this.listLevelObj=this.gameController.dataGem.Topaz.level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(this.checkEnemyAround(),0<this.listEnemey.length&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){0<this.listEnemey.length&&(this.ani.setCurrentTime(1.8,"TopazShoot"),this.animState=this.ani.play("TopazShoot"),this.animState.duration=this.timeCd-.01)},this),i=cc.callFunc(function(){0<this.listEnemey.length&&this.shoot()},this),n=cc.callFunc(function(){this.isCdShoot=!0},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.shoot=function(){if(this.listEnemey)for(var t=0,e=this.listEnemey;t<e.length;t++){var i=e[t],n=cc.instantiate(this.bulletPrefab);n.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),n.getComponent(o.default).target=i,n.getComponent(o.default).damage=this.damage(),n.getComponent(o.default).indexTarget=i.getComponent(s.default).index,this.gameController.mapController.node.addChild(n)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(n.default);i.default=c,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy","./Gem":"Gem"}],GemYellowSapphire:[function(t,e,i){"use strict";cc._RF.push(e,"4710fb0/VtNE6yFpE2XiChG","GemYellowSapphire"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./Gem"),n=t("./SplashBullet"),s=t("./Enemy"),a=cc._decorator,r=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletPrefab=null,t.turret=null,t.img=null,t.nearestEnemy=null,t.targetEnemy=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.icon=this.img;for(var t=0,e=0;e<this.gameController.dataGemCombine.length;e++)if(this.gameController.dataGemCombine[e].Name.toString().toLocaleLowerCase()===this.node.name.toString().toLocaleLowerCase()){t=e;break}this.listLevelObj=this.gameController.dataGemCombine[t].Level,this.updateParameter()},t.prototype.update=function(){if(this.gameController.isActiveWay&&this.isCanAttack()&&(!this.isbuff&&0<this.buffDMG()&&(this.checkGemAround(this.rangeBuff()),0<this.listGemAround.length&&this.buffGemsAround(),this.isbuff=!0),this.checkEnemyAround(),(!this.targetEnemy||""==this.targetEnemy.name||this.targetEnemy.getComponent(s.default).isDie)&&0<this.listEnemey.length&&this.detectNearestEnemy(),0<this.listEnemey.length&&this.targetEnemy&&""!=this.targetEnemy.name&&this.isCdShoot)){this.isCdShoot=!1;var t=this.cdActiveSkill();this.timeCd=t-t*this.incrSDP/100,this.timeCd<this.maxCd&&(this.timeCd=this.maxCd);var e=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.animState=this.ani.play("SilverShoot"),this.animState.duration=this.timeCd-.1)},this),i=cc.callFunc(function(){cc.pDistance(this.targetEnemy.getPosition(),this.node.getPosition())>this.range()&&(this.targetEnemy=null,this.detectNearestEnemy()),this.targetEnemy&&""!=this.targetEnemy.name&&this.shoot()},this),n=cc.callFunc(function(){this.targetEnemy&&""!=this.targetEnemy.name&&(this.isCdShoot=!0)},this);this.node.runAction(cc.sequence(e,i,cc.delayTime(this.timeCd),n))}},t.prototype.buffGemsAround=function(){for(var t=0,e=this.listGemAround;t<e.length;t++){var i=e[t],n=this.buffDMG();i.getComponent(o.default).incrDMG<n&&(i.getComponent(o.default).incrDMG=n)}},t.prototype.removedBuffGemsAround=function(){for(var t=0,e=this.listGemAround;t<e.length;t++){var i=e[t],n=this.buffSDP();(i.getComponent(o.default).incrDMG=n)&&(i.getComponent(o.default).incrDMG=0)}},t.prototype.shoot=function(){if(this.targetEnemy){var t=cc.instantiate(this.bulletPrefab);t.setPosition(cc.pAdd(this.node.getPosition(),this.turret.getPosition())),t.getComponent(n.default).target=this.targetEnemy,t.getComponent(n.default).damage=this.damage(),t.getComponent(n.default).gameController=this.gameController,t.getComponent(n.default).nameExplosion="SilverExplosion",t.getComponent(n.default).indexTarget=this.targetEnemy.getComponent(s.default).index,t.getComponent(n.default).slow=this.slow(),t.getComponent(n.default).splashTile=this.splashRange(),t.getComponent(n.default).timeActive=this.timeActive(),this.gameController.mapController.node.addChild(t)}},__decorate([l(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([l(cc.Node)],t.prototype,"turret",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"img",void 0),t=__decorate([r],t)}(o.default);i.default=c,cc._RF.pop()},{"./Enemy":"Enemy","./Gem":"Gem","./SplashBullet":"SplashBullet"}],Gem:[function(t,e,i){"use strict";cc._RF.push(e,"1cadbeAfW1Em5wFkKlZxSkT","Gem"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Enemy"),o=cc._decorator,s=o.ccclass,a=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=null,t.posSquare=[],t.gameController=null,t.isCdShoot=!0,t.isCdDps=!0,t.ani=null,t.animState=null,t.icon=null,t.index=0,t.targetEnemy=null,t.nearestEnemy=null,t.listEnemey=[],t.listLevelObj=[],t.listGemAround=[],t.currentLevel=0,t.incrSDP=0,t.incrDMG=0,t.isCombined=!1,t.timeCd=1,t.maxCd=.05,t.isbuff=!1,t}return __extends(t,e),(o=t).prototype.chanceCrit=function(){return this.listLevelObj[this.currentLevel-1].chanceCrit},t.prototype.chanceStun=function(){return this.listLevelObj[this.currentLevel-1].chanceStun},t.prototype.cost=function(){return this.listLevelObj[this.currentLevel-1].costUpgrade},t.prototype.range=function(){return this.listLevelObj[this.currentLevel-1].range*this.gameController.tileSize*2+this.node.height},t.prototype.rangeDPS=function(){return this.listLevelObj[this.currentLevel-1].dpsTile*this.gameController.tileSize*2+this.node.height},t.prototype.cdActiveSkill=function(){return this.listLevelObj[this.currentLevel-1].speed/30},t.prototype.damage=function(){var t=this.minDamage(),e=this.maxDamage(),i=Math.floor(Math.random()*(e-t+1))+t;return i+Math.round(i*this.incrDMG/100)},t.prototype.minDamage=function(){return this.listLevelObj[this.currentLevel-1].damageMin},t.prototype.maxDamage=function(){return this.listLevelObj[this.currentLevel-1].damageMax},t.prototype.Type=function(){return this.listLevelObj[this.currentLevel-1].name},t.prototype.slow=function(){return this.listLevelObj[this.currentLevel-1].slow},t.prototype.timeActive=function(){return this.listLevelObj[this.currentLevel-1].timeActive},t.prototype.splashRange=function(){return this.listLevelObj[this.currentLevel-1].splashTile},t.prototype.critDamage=function(){return this.listLevelObj[this.currentLevel-1].critDamage},t.prototype.damagePosion=function(){return this.listLevelObj[this.currentLevel-1].damagePosion},t.prototype.buffSDP=function(){return this.listLevelObj[this.currentLevel-1].increaseSDP},t.prototype.buffDMG=function(){return this.listLevelObj[this.currentLevel-1].increaseDMG},t.prototype.rangeBuff=function(){return this.listLevelObj[this.currentLevel-1].rangeIncre*(2*this.gameController.tileSize)},t.prototype.isCanAttack=function(){var t=this.listLevelObj[this.currentLevel-1].typeAttack;return"both"===t||(!("air"!=t||!this.gameController.isFlyEnemyNextWay)||"ground"==t&&!this.gameController.isFlyEnemyNextWay)},t.prototype.checkEnemyAround=function(){if(this.listEnemey=[],!(this.gameController.enemys.length<=0))for(var t=0,e=this.gameController.enemys;t<e.length;t++){var i=e[t];cc.pDistance(i.getPosition(),this.node.getPosition())<=this.range()&&!i.getComponent(n.default).isDie&&this.listEnemey.push(i)}},t.prototype.checkGemAround=function(t){if(!(this.gameController.gems.length<=0)){this.listGemAround=[];for(var e=0,i=this.gameController.gems;e<i.length;e++){var n=i[e];if(cc.pDistance(n.getPosition(),this.node.getPosition())<=t){if(n.getComponent(o).pos.x==this.pos.x&&n.getComponent(o).pos.y==this.pos.y)continue;this.listGemAround.push(n)}}}},t.prototype.updateParameter=function(){this.cost(),this.range(),this.cdActiveSkill(),this.damage(),this.Type()},t.prototype.detectNearestEnemy=function(){if(!(this.listEnemey.length<=0)){this.nearestEnemy=this.listEnemey[0];for(var t=cc.pDistance(this.nearestEnemy.getPosition(),this.gameController.endMile),e=0,i=this.listEnemey;e<i.length;e++){var n=i[e],o=cc.pDistance(n.getPosition(),this.gameController.endMile);o<t&&(t=o,this.nearestEnemy=n)}this.targetEnemy=this.nearestEnemy}},t=o=__decorate([s],t);var o}(cc.Component));i.default=a,cc._RF.pop()},{"./Enemy":"Enemy"}],HitDamage:[function(t,e,i){"use strict";cc._RF.push(e,"d2b8a42Ga9O35cdiQia3/4C","HitDamage"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.damageDisplay=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.label=this.node.getComponent(cc.Label),this.label.string=this.damageDisplay.toString(),this.node.runAction(cc.spawn(cc.moveBy(1,cc.v2(0,20)),cc.fadeOut(1))),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.node.destroy()},this)))},t.prototype.start=function(){},t=__decorate([o],t)}(cc.Component));i.default=s,cc._RF.pop()},{}],InitData:[function(t,e,i){"use strict";cc._RF.push(e,"6e9f5QuFj9HnbLqV70Cea5t","InitData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.ranLevelGem=function(t){var e=Math.random();switch(t){case 0:case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return e<=.3?1:e<=.6?2:e<=.9?3:4;case 6:return e<=.2?1:e<=.5?2:e<=.8?3:4;case 7:return e<=.1?1:e<=.4?2:e<=.7?3:4;case 8:return 5}},t.maxLevelGem=6,t.mileWays=[cc.v2(3,5),cc.v2(3,10),cc.v2(3,20),cc.v2(22,20),cc.v2(41,20),cc.v2(41,10),cc.v2(22,10),cc.v2(22,20),cc.v2(22,40),cc.v2(41,40),cc.v2(41,50)],t.listIsFly=[!1,!0,!1,!0],t}();i.default=n,cc._RF.pop()},{}],ManagerUi:[function(t,e,i){"use strict";cc._RF.push(e,"187d1a//TlDHY9MzIhmw1Fi","ManagerUi"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./GameController"),o=cc._decorator,s=o.ccclass,a=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gemcontroller=null,t.nodeFormulaCombine=null,t.isLoadFormulaCombine=!1,t}return __extends(t,e),t.prototype.loadFormulaCombine=function(){for(var t=this.gemcontroller.dataCombine,e=this.nodeFormulaCombine.getComponent(cc.ScrollView).content,i=e.getChildByName("item"),n=t[0].Name+" = ",o=0;o<t[0].List.length;o++)n+=t[0].List[o][0]+" "+t[0].List[o][1],o+1!=t[0].List.length&&(n+=" + ");i.getChildByName("label").getComponent(cc.Label).string=n;for(var s=1;s<t.length;s++){var a=cc.instantiate(i);a.setPosition(cc.v2(0,0)),e.addChild(a);var r=t[s].Name+" = ";r=t[s].Name+" = ";for(o=0;o<t[s].List.length;o++)r+=t[s].List[o][0]+" "+t[s].List[o][1],o+1!=t[s].List.length&&(r+=" + ");a.getChildByName("label").getComponent(cc.Label).string=r}this.isLoadFormulaCombine=!0},__decorate([a(n.default)],t.prototype,"gemcontroller",void 0),__decorate([a(cc.Node)],t.prototype,"nodeFormulaCombine",void 0),t=__decorate([s],t)}(cc.Component);i.default=r,cc._RF.pop()},{"./GameController":"GameController"}],MapController:[function(t,e,i){"use strict";cc._RF.push(e,"68f467dcuxJXrR7kw1EJ5XF","MapController"),Object.defineProperty(i,"__esModule",{value:!0});var u=t("./ATile"),n=cc._decorator,o=n.ccclass,s=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.posTouchEnd=null,t.paths=[],t.open=[],t.closed=[],t.newATile=null,t.gameController=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.tilePosistion=function(t){var e=this.node.getContentSize(),i=this.gameController.tileSize,n=this.gameController.tileSize,o=Math.floor(t.x/i),s=Math.floor((e.height-t.y)/n);return cc.p(o,s)},t.prototype.pixelPosition=function(t){var e=this.node.getContentSize(),i=this.gameController.tileSize,n=this.gameController.tileSize,o=i*t.x+i/2,s=e.height-n*t.y-i/2;return cc.p(o,s)},t.prototype.indexOfStepArray=function(t,e){for(var i=0;i<e.length;++i)if(t.equals(e[i].position))return i;return-1},t.prototype.insertToOpen=function(t){t.getF();for(var e=t.f,i=this.open.length,n=0;n<i&&!(e<=this.open[n].f);++n);this.open.splice(n,0,t)},t.prototype.moveToward=function(t,e,i){this.closed=[],this.open=[];var n=[],o=new u.default(t);this.open.push(o);do{var s=this.open.shift();if((s.x<0||s.y<0)&&cc.log("currentStep: "+s),this.closed.push(s),s.position.equals(e)){!0;for(var a=s;n.unshift(a.position),null!==(a=a.last););this.open=[],this.closed=[];break}for(var r=this.borderMovablePoints(s.position,i),l=0;l<r.length;++l){var c=r[l];if(-1==this.indexOfStepArray(c,this.closed)){var h=new u.default(c),m=this.indexOfStepArray(c,this.open);if(-1==m){h.last=s,h.g=s.g+1;var d=c.sub(e);h.h=Math.abs(d.x)+Math.abs(d.y),this.insertToOpen(h)}else h=this.open[m],s.g+1<h.g&&(h.g=s.g+1,this.open.splice(m,1),this.insertToOpen(h))}else r.splice(l,1),l--}}while(0<this.open.length);return n},t.prototype.borderMovablePoints=function(t,e){var i,n=[],o=cc.p(t.x,t.y-1),s=this.gameController.tiles;i=o.y*this.gameController.row+o.x,0<=o.y&&s[i]&&o.y<=this.gameController.col-1&&(e?n.push(o):0==s[i].hasGem&&0==s[i].hasStone&&n.push(o));var a=cc.p(t.x,t.y+1);i=a.y*this.gameController.row+a.x,0<=a.y&&s[i]&&a.y<=this.gameController.col-1&&(e?n.push(a):s[i]&&0==s[i].hasGem&&0==s[i].hasStone&&n.push(a));var r=cc.p(t.x-1,t.y);i=r.y*this.gameController.row+r.x,0<=r.x&&s[i]&&r.x<=this.gameController.row-1&&(e?n.push(r):s[i]&&0==s[i].hasGem&&0==s[i].hasStone&&n.push(r));var l=cc.p(t.x+1,t.y);return i=l.y*this.gameController.row+l.x,0<=l.x&&s[i]&&l.x<=this.gameController.row-1&&(e?(n.push(l),!0):s[i]&&0==s[i].hasGem&&0==s[i].hasStone&&(n.push(l),!0)),n},t=__decorate([o],t)}(cc.Component));i.default=s,cc._RF.pop()},{"./ATile":"ATile"}],SplashBullet:[function(t,e,i){"use strict";cc._RF.push(e,"58c62COWsZMJosl+/VkOe6r","SplashBullet"),Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Enemy"),o=t("./Bullet"),s=cc._decorator,a=s.ccclass,r=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.endPos=null,t.activeExp=!1,t.collider=null,t.ani=null,t.splashTile=1,t.gameController=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.ani=this.getComponent(cc.Animation),this.endPos=this.target.getPosition();var t=this.node.getPosition(),e=this.target.getPosition();this.direction=cc.pNormalize(cc.pSub(e,t)),this.collider=this.node.getComponent(cc.BoxCollider),this.collider.enabled=!1},t.prototype.update=function(t){var e;this.target.name||this.node.destroy(),"SilverExplosion"===this.nameExplosion?e=cc.pDistance(this.node.getPosition(),this.target.getPosition()):"RubyExplosion"===this.nameExplosion&&(e=cc.pDistance(this.node.getPosition(),this.endPos)),this.target&&(10<e?"SilverExplosion"===this.nameExplosion?this.bulletTarget():"RubyExplosion"===this.nameExplosion&&this.bulletTargetStay():this.activeExp||this.explosion())},t.prototype.explosion=function(){this.activeExp=!0;var t=this.splashTile*this.gameController.tileSize*2;this.node.setContentSize(t,t),this.collider.size.width=t,this.collider.size.height=t,this.collider.enabled=!0,this.node.runAction(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){this.ani.play(this.nameExplosion),this.collider.enabled=!1},this))),this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.node.destroy()},this)))},t.prototype.onCollisionEnter=function(t,e){this.checkColli(t,e),"1"==t.tag&&this.activeExp&&t.node.getComponent(n.default)&&(t.node.getComponent(n.default).isDie||t.node.getComponent(n.default).index==this.indexTarget||t.node.getComponent(n.default).takeDame(this.damage))},t=__decorate([a],t)}(o.default));i.default=r,cc._RF.pop()},{"./Bullet":"Bullet","./Enemy":"Enemy"}],Stone:[function(t,e,i){"use strict";cc._RF.push(e,"55adaGrlSpDvoaWYtkt5Sly","Stone"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=(n.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pos=null,t.posSquare=[],t.gameController=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.addTouch=function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,function(t){e.gameController.isActiveWay||((e.gameController.stonePick=e).gameController.btnRemoveStone.active=!0)},e.node)},t=__decorate([o],t)}(cc.Component));i.default=s,cc._RF.pop()},{}],Tile:[function(t,e,i){"use strict";cc._RF.push(e,"33556h5655HYqUDY554I5x4","Tile"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=(n.property,function(){function t(){this.hasGem=!1,this.hasStone=!1,this.hasMile=!1,this.pos=null}return t=__decorate([o],t)}());i.default=s,cc._RF.pop()},{}],TouchEvent:[function(t,e,i){"use strict";cc._RF.push(e,"062afCndD5Lu56Fxmsu389k","TouchEvent"),Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,s=n.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.target=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(){this.setActive()},this)},t.prototype.setActive=function(){this.target&&(this.target.active=!this.target.active)},__decorate([s(cc.Node)],t.prototype,"target",void 0),t=__decorate([o],t)}(cc.Component);i.default=a,cc._RF.pop()},{}]},{},["ATile","Bullet","BulletPosion","CameraControl","Enemy","GameController","Gem","GemAmethyst","GemAquamarine","GemBlackOpal","GemDarkEmerald","GemDiamon","GemEmerald","GemGold","GemJade","GemMalachite","GemOpal","GemPinkDiamond","GemRedCrysta","GemRuby","GemSapphire","GemSilver","GemStarRuby","GemTopaz","GemYellowSapphire","HitDamage","InitData","ManagerUi","MapController","SplashBullet","Stone","Tile","TouchEvent"]);